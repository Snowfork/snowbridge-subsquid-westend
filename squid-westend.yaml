manifestVersion: subsquid.io/v0.1
name: snowbridge-subsquid-westend
version: 1
description: Snowbridge squid for Westend
build:
deploy:
  addons:
    postgres:
  migrate:
    cmd: ["sqd", "migration:apply"]
  processor:
    - name: ethereum-processor
      env:
        RPC_ETH_HTTP: ${{ secrets.SEPOLIA_RPC_ETH_HTTP }}
        START_BLOCK_ETH: 6675223
      cmd: ["sqd", "process:ethereum:westend"]
    - name: bridgehub-processor
      env:
        RPC_BRIDGEHUB: "wss://bridge-hub-westend-rpc.dwellir.com"
        START_BLOCK_BRIDGEHUB: 6000000
      cmd: ["sqd", "process:bridgehub:westend"]
    - name: assethub-processor
      env:
        RPC_ASSETHUB: "wss://asset-hub-westend-rpc.dwellir.com"
        START_BLOCK_ASSETHUB: 9102740
      cmd: ["sqd", "process:assethub:westend"]
    - name: frequency-processor
      env:
        RPC_FREQUENCY: ${{ secrets.RPC_FREQUENCY }}
        START_BLOCK_ASSETHUB: 333000
      cmd: ["sqd", "process:westend:parachain:frequency"]
    - name: post-processor
      cmd: ["sqd", "postprocess"]
  api:
    cmd: ["sqd", "serve:prod"]
scale:
  addons:
    postgres:
      storage: 10G
      profile: small
  processor:
    profile: small
  api:
    profile: small
